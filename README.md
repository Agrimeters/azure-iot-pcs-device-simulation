[![Build][build-badge]][build-url]
[![Issues][issues-badge]][issues-url]
[![Gitter][gitter-badge]][gitter-url]

Azure IoT Device Simulation
===========================

Overview
========

Device simulation helps you build simulated devices that look and behave like the real thing. With Device simulation you can gather, process, analyze and act on data from simulated devices allowing you to test your solutions end to end throughout the development lifecycle. You can evaluate how well your solution processes, manages, and presents the data being generated by your simulated devices.
Test your IoT solution with up to millions of simulated devices using the device simulator solution accelerator. Connect to other accelerators or custom solutions throughout the development cycle.
The Device Simulation simulates IoT devices and the way they send telemetry to the cloud, and it’s easy to integrate into any solution you want to test.  Device Simulation makes it easy for you to configure an IoT hub for the first time, or to add your own pre-existing hub.  Choose from 3 pre-built sample devices (chiller, elevator, or truck), or define your own device specs.  Then, define the number of devices to simulate (up to 2 million), and the frequency at which they send telemetry.  Scale test and get a preview of your IoT project’s ROI.  


Dependencies
============

The service depends on:

* [Azure IoT Hub][iothub-url] used to store virtual devices, to send
  telemetry and receive method calls
* [Storage adapter microservice][storageadapter-url] used to store the
  simulation details
* Configuration settings to connect to IoT Hub and the Storage Adapter.
  These settings are stored in environment variables, which are referenced
  by the service configuration. See below for more information.

Common Scenarios
================

1.	Load Testing – Customers will be able to perform large scale tests using Device Simulation. Individual simulations will support up to 2 million simulated devices. The simulation environment will auto scale up to add additional VMs as needed to support large scale simulations and then scale back down when done to control costs.
2.	IoT Demos – Device Simulation now includes sample simulations that can be started with a click.  This allows for instant demos showcasing device data flowing to an IoT Hub.
3.	Simple POC – This scenario was supported in the initial release of Device Simulation. However, there are more capabilities here. Customers can create device models and re-use them for easily repeatable simulations. Individual simulations can also now support a mix of multiple device types.
4.	Advanced device behaviors – Customers will be able to write custom JSON device definition files and script device behaviors using JavaScript. This allows for very complex scenarios allowing a device to mimic the behavior of the real thing (e.g. vehicles following roads, interior temperature varying based on exterior temperature, etc.)
5.	Simulation-driven development – Customers can use Device Simulation to generate both expected and unexpected telemetry for continuous testing while developing their solution on top of Azure IoT.


## Project Structure

The solution contains the following projects and folders:

* **WebService**: ASP.NET Web API exposing a RESTful API for Simulation
  functionality, e.g. start, stop, add devices, etc. This is also the
  service entry point, starting all the main threads.
* **SimulationAgent**: Library containing the logic that controls the
  simulation. The logic is started by the WebService assembly.
* **Services**: Library containing common business logic for interacting with
  Azure IoT Hub, Storage Adapter, and to run the simulation code.
* **WebService.Test**: Unit tests for the ASP.NET Web API project.
* **SimulationAgent.Test**: Unit tests for the SimulationAgent project.
* **Services.Test**: Unit tests for the Services library.
* **scripts**: a folder containing scripts for the command line console,
  to build and run the solution, and other frequent tasks.
  
Other resources
===============

* [Device Models specification][device-model-wiki]
* [Simulation service API specs][simulation-service-api-spec-wiki]
* [Device Models API specs][device-models-api-spec-wiki]
* [Simulations API specs][simulation-api-spec-wiki]

Contributing to the solution
============================

Please follow our [contribution guidelines](docs/CONTRIBUTING.md).  We love PRs too.

License
=======
Copyright (c) Microsoft Corporation. All rights reserved.

Licensed under the [MIT](LICENSE) License.

[build-badge]: https://img.shields.io/travis/Azure/azure-iot-pcs-simulation.svg
[build-url]: https://travis-ci.org/Azure/azure-iot-pcs-simulation
[issues-badge]: https://img.shields.io/github/issues/azure/azure-iot-pcs-simulation.svg
[issues-url]: https://github.com/azure/azure-iot-pcs-simulation/issues
[gitter-badge]: https://img.shields.io/gitter/room/azure/iot-solutions.js.svg
[gitter-url]: https://gitter.im/Azure/iot-solutions
